!function(e){e.fn.richText=function(t){function a(){var t,a,n="";C.useParagraph!==!1&&document.execCommand("DefaultParagraphSeparator",!1,"p"),"TEXTAREA"===N.prop("tagName")||(N.val()?(t=N.val(),a=N.prop("attributes"),e.each(a,function(){this.name&&(n+=" "+this.name+'="'+this.value+'"')}),N.replaceWith(e("<textarea"+n+' data-richtext="init">'+t+"</textarea>")),N=e('[data-richtext="init"]'),N.removeAttr("data-richtext")):N.html()?(t=N.html(),a=N.prop("attributes"),e.each(a,function(){this.name&&(n+=" "+this.name+'="'+this.value+'"')}),N.replaceWith(e("<textarea"+n+' data-richtext="init">'+t+"</textarea>")),N=e('[data-richtext="init"]'),N.removeAttr("data-richtext")):(a=N.prop("attributes"),e.each(a,function(){this.name&&(n+=" "+this.name+'="'+this.value+'"')}),N.replaceWith(e("<textarea"+n+' data-richtext="init"></textarea>')),N=e('[data-richtext="init"]'),N.removeAttr("data-richtext"))),R=e("<div />",{"class":"richText"});var i=e("<div />",{"class":"richText-toolbar"}),o=e("<div />",{"class":"richText-editor",id:ne,contenteditable:!0});if(i.append(L),C.bold===!0&&L.append(k.clone().append(U)),C.italic===!0&&L.append(k.clone().append(D)),C.underline===!0&&L.append(k.clone().append(A)),C.leftAlign===!0&&L.append(k.clone().append(F)),C.centerAlign===!0&&L.append(k.clone().append(H)),C.rightAlign===!0&&L.append(k.clone().append(E)),C.ol===!0&&L.append(k.clone().append(B)),C.ul===!0&&L.append(k.clone().append(I)),C.fonts===!0&&C.fontList.length>0&&L.append(k.clone().append(P)),C.heading===!0&&L.append(k.clone().append(M)),C.fontColor===!0&&L.append(k.clone().append(W)),C.imageUpload===!0&&L.append(k.clone().append(X)),C.fileUpload===!0&&L.append(k.clone().append(Q)),C.videoEmbed===!0&&L.append(k.clone().append(Y)),C.urls===!0&&L.append(k.clone().append(z)),C.table===!0&&L.append(k.clone().append(_)),C.removeStyles===!0&&L.append(k.clone().append(V)),C.code===!0&&L.append(k.clone().append(G)),o.html(N.val()),R.append(i),R.append(o),R.append(N.clone().hide()),N.replaceWith(R),R.append(e("<div />",{"class":"richText-toolbar"}).append(e("<a />",{"class":"richText-undo is-disabled",html:'<span class="fa fa-undo"></span>'})).append(e("<a />",{"class":"richText-redo is-disabled",html:'<span class="fa fa-repeat"></span>'})).append(e("<a />",{"class":"richText-help",html:'<span class="fa fa-question-circle"></span>'}))),C.height&&C.height>0)R.children(".richText-editor, .richText-initial").css({"min-height":C.height+"px",height:C.height+"px"});else if(C.heightPercentage&&C.heightPercentage>0){var r=R.parent().innerHeight(),l=C.heightPercentage/100*r;l-=2*i.outerHeight(),l-=parseInt(R.css("margin-top")),l-=parseInt(R.css("margin-bottom")),l-=parseInt(R.find(".richText-editor").css("padding-top")),l-=parseInt(R.find(".richText-editor").css("padding-bottom")),R.children(".richText-editor, .richText-initial").css({"min-height":l+"px",height:l+"px"})}C["class"]&&R.addClass(C["class"]),C.id&&R.attr("id",C.id),y(),oe.push(R.find("textarea").val())}function n(e,t){"undefined"==typeof t&&(t=null),m(),"heading"===e&&s()?g("<"+t+">"+s()+"</"+t+">"):document.execCommand(e,!1,t)}function i(){var t=e("#"+ne),a=t.html();C.useSingleQuotes===!0&&(a=v(a)),t.siblings(".richText-initial").val(a)}function o(t){var a=e("#"+t),n=a.siblings(".richText-initial").val();a.html(n)}function r(e){var t=document.getElementById(e);if(window.getSelection&&document.createRange){var a=window.getSelection&&window.getSelection();if(a&&a.rangeCount>0){var n=window.getSelection().getRangeAt(0),i=n.cloneRange();i.selectNodeContents(t),i.setEnd(n.startContainer,n.startOffset);var o=i.toString().length;return{start:o,end:o+n.toString().length}}return S?S:{start:0,end:0}}if(document.selection&&document.body.createTextRange){var r=document.selection.createRange(),l=document.body.createTextRange();l.moveToElementText(t),l.setEndPoint("EndToStart",r);var o=l.text.length;return{start:o,end:o+r.text.length}}}function l(){var e=document.getElementById(ne),t=S;if(window.getSelection&&document.createRange){var a=0,n=document.createRange();n.setStart(e,0),n.collapse(!0);for(var i,o=[e],r=!1,l=!1;!l&&(i=o.pop());)if(3===i.nodeType){var d=a+i.length;!r&&t.start>=a&&t.start<=d&&(n.setStart(i,t.start-a),r=!0),r&&t.end>=a&&t.end<=d&&(n.setEnd(i,t.end-a),l=!0),a=d}else for(var s=i.childNodes.length;s--;)o.push(i.childNodes[s]);var c=window.getSelection();c.removeAllRanges(),c.addRange(n)}else if(document.selection&&document.body.createTextRange){var p=document.body.createTextRange();p.moveToElementText(e),p.collapse(!0),p.moveEnd("character",t.end),p.moveStart("character",t.start),p.select()}}function d(t,a){if(9!==a.keyCode)return!1;var n;if(t.getSelection&&(n=t.getSelection(),n.rangeCount>0)){var i=null,o=null;if(a.shiftKey?(o="previous",i="TD"===n.focusNode.nodeName?null!=n.focusNode.previousSibling?n.focusNode.previousSibling:null!=n.focusNode.parentNode.previousSibling?n.focusNode.parentNode.previousSibling.childNodes[n.focusNode.parentNode.previousSibling.childNodes.length-1]:null:null!=n.focusNode.parentNode.previousSibling?n.focusNode.parentNode.previousSibling:null!=n.focusNode.parentNode.parentNode.previousSibling?n.focusNode.parentNode.parentNode.previousSibling.childNodes[n.focusNode.parentNode.parentNode.previousSibling.childNodes.length-1]:null):(o="next",i="TD"===n.focusNode.nodeName?null!=n.focusNode.nextSibling?n.focusNode.nextSibling:null!=n.focusNode.parentNode.nextSibling?n.focusNode.parentNode.nextSibling.childNodes[0]:null:null!=n.focusNode.parentNode.nextSibling?n.focusNode.parentNode.nextSibling:null!=n.focusNode.parentNode.parentNode.nextSibling?n.focusNode.parentNode.parentNode.nextSibling.childNodes[0]:null),null!=i)return n.collapse(i,Math.min(i.length,n.focusOffset+1)),null!=i.textContent&&n.selectAllChildren(i),a.preventDefault(),!0;if(null===i&&"next"===o&&"TD"===n.focusNode.nodeName){for(var r=e(n.focusNode).parents("table"),l=r.find("tr").first().children("td").length,s=e("<tr />"),c=e("<td />"),p=1;l>=p;p++)s.append(c.clone());r.append(s),d(window,{keyCode:9,shiftKey:!1,preventDefault:function(){}})}}return!1}function s(){var e;return window.getSelection?(e=window.getSelection(),e.toString()):document.selection.createRange?(e=document.selection.createRange(),e.text):!1}function c(t){var a=e(".richText-editor#"+t).siblings(".richText-initial");p(a.val()),S=r(t)}function p(e){oe.length-1>re&&(oe.length=re+1),oe[oe.length-1]!==e&&oe.push(e),re=oe.length-1,h()}function h(){0>=re?R.find(".richText-undo").addClass("is-disabled"):R.find(".richText-undo").removeClass("is-disabled"),re>=oe.length-1||0===oe.length?R.find(".richText-redo").addClass("is-disabled"):R.find(".richText-redo").removeClass("is-disabled")}function f(){re--;var e=oe[re];R.find("textarea").val(e),R.find(".richText-editor").html(e),h()}function u(){re++;var e=oe[re];R.find("textarea").val(e),R.find(".richText-editor").html(e),h()}function m(){S&&l()}function g(e){var t,a;if(window.getSelection){if(t=window.getSelection(),t.getRangeAt&&t.rangeCount){a=t.getRangeAt(0),a.deleteContents();var n=document.createElement("div");n.innerHTML=e;for(var i,o,r=document.createDocumentFragment();i=n.firstChild;)o=r.appendChild(i);a.insertNode(r),o&&(a=a.cloneRange(),a.setStartAfter(o),a.collapse(!0),t.removeAllRanges(),t.addRange(a))}}else document.selection&&"Control"!==document.selection.type&&document.selection.createRange().pasteHTML(e)}function v(e){if(!e)return"";var t,a;return C.useSingleQuotes===!0?(t=/\s+(\w+\s*=\s*(["][^"]*["])|(['][^']*[']))+/g,a=e.replace(t,function(e,t,a){return a?e.replace(a,a.replace(/\"/g,"'")):e})):(t=/\s+(\w+\s*=\s*(['][^']*['])|(["][^"]*["]))+/g,a=e.replace(t,function(e,t,a){return a?e.replace(a,a.replace(/'/g,'"')):e})),a}function x(e){var t=[],a="";t["#FFFFFF"]="White",t["#000000"]="Black",t["#7F6000"]="Brown",t["#938953"]="Beige",t["#1F497D"]="Dark Blue",t.blue="Blue",t["#4F81BD"]="Light blue",t["#953734"]="Dark red",t.red="Red",t["#4F6128"]="Dark green",t.green="Green",t["#3F3151"]="Purple",t["#31859B"]="Dark Turquois",t["#4BACC6"]="Turquois",t["#E36C09"]="Dark orange",t["#F79646"]="Orange",t["#FFFF00"]="Yellow",C.colors&&C.colors.length>0&&(t=C.colors);for(var n in t)a+='<li class="inline"><a data-command="'+e+'" data-option="'+n+'" style="text-align:left;" title="'+t[n]+'"><span class="box-color" style="background-color:'+n+'"></span></a></li>';return a}function b(){R.find(".richText-editor").is(":visible")?(R.find(".richText-initial").show(),R.find(".richText-editor").hide(),e(".richText-toolbar").find(".richText-btn").each(function(){e(this).hasClass("fa-code")||e(this).parent("li").attr("data-disable","true")})):(R.find(".richText-initial").hide(),R.find(".richText-editor").show(),e(".richText-toolbar").find("li").removeAttr("data-disable"))}function T(e,t){var a=w(e),n=!1,i=!1;if(!a)return!1;t?"responsive"!==t?t=t.split("x"):(n=!0,t="640x360",t=t.split("x")):(t="640x360",t=t.split("x"));var o="<br><br>";n===!0&&(o+='<div style="position:relative;height:0;padding-bottom:56.25%">');var r="webkitallowfullscreen mozallowfullscreen allowfullscreen";return"YouTube"===a.platform?(o+='<iframe src="https://www.youtube.com/embed/'+a.id+'?ecver=2" width="'+t[0]+'" height="'+t[1]+'" frameborder="0"'+(n===!0?' style="position:absolute;width:100%;height:100%;left:0"':"")+" "+r+"></iframe>",i=!0):"Vimeo"===a.platform?(o+='<iframe src="https://player.vimeo.com/video/'+a.id+'" width="'+t[0]+'" height="'+t[1]+'" frameborder="0"'+(n===!0?' style="position:absolute;width:100%;height:100%;left:0"':"")+" "+r+"></iframe>",i=!0):"Facebook"===a.platform?(o+='<iframe src="https://www.facebook.com/plugins/video.php?href='+encodeURI(e)+"&show_text=0&width="+t[0]+'" width="'+t[0]+'" height="'+t[1]+'" style="'+(n===!0?'position:absolute;width:100%;height:100%;left:0;border:none;overflow:hidden"':"border:none;overflow:hidden")+'" scrolling="no" frameborder="0" allowTransparency="true" '+r+"></iframe>",i=!0):"Dailymotion"===a.platform&&(o+='<iframe frameborder="0" width="'+t[0]+'" height="'+t[1]+'" src="//www.dailymotion.com/embed/video/'+a.id+'"'+(n===!0?' style="position:absolute;width:100%;height:100%;left:0"':"")+" "+r+"></iframe>",i=!0),n===!0&&(o+="</div>"),o+="<br><br>",i?o:!1}function w(e){var t=/(?:http?s?:\/\/)?(?:www\.)?(?:vimeo\.com)\/?(.+)/,a=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,n=/(?:http?s?:\/\/)?(?:www\.)?(?:facebook\.com)\/.*\/videos\/[0-9]+/,i=/(?:http?s?:\/\/)?(?:www\.)?(?:dailymotion\.com)\/video\/([a-zA-Z0-9]+)/,o=e.match(a),r=e.match(t),l=e.match(n),d=e.match(i);return o&&11===o[2].length?{platform:"YouTube",id:o[2]}:r&&r[1]?{platform:"Vimeo",id:r[1]}:l&&l[0]?{platform:"Facebook",id:l[0]}:d&&d[1]?{platform:"Dailymotion",id:d[1]}:!1}function y(){R&&!R.find(".richText-editor").html()&&(C.useParagraph!==!1?R.find(".richText-editor").html("<p><br></p>"):R.find(".richText-editor").html("<div><br></div>"),i())}var C=e.extend({bold:!0,italic:!0,underline:!0,leftAlign:!0,centerAlign:!0,rightAlign:!0,ol:!0,ul:!0,heading:!0,fonts:!0,fontList:["Arial","Arial Black","Comic Sans MS","Courier New","Geneva","Georgia","Helvetica","Impact","Lucida Console","Tahoma","Times New Roman","Verdana"],fontColor:!0,imageUpload:!0,fileUpload:!0,videoEmbed:!0,urls:!0,table:!0,removeStyles:!0,code:!0,colors:[],fileHTML:"",imageHTML:"",useSingleQuotes:!1,height:0,heightPercentage:0,id:"","class":"",useParagraph:!1},t),N=e(this);N.addClass("richText-initial");var R,S,L=e("<ul />"),k=e("<li />"),U=e("<a />",{"class":"richText-btn fa fa-bold","data-command":"bold"}),D=e("<a />",{"class":"richText-btn fa fa-italic","data-command":"italic"}),A=e("<a />",{"class":"richText-btn fa fa-underline","data-command":"underline"}),F=e("<a />",{"class":"richText-btn fa fa-align-left","data-command":"justifyLeft"}),H=e("<a />",{"class":"richText-btn fa fa-align-center","data-command":"justifyCenter"}),E=e("<a />",{"class":"richText-btn fa fa-align-right","data-command":"justifyRight"}),B=e("<a />",{"class":"richText-btn fa fa-list-ol","data-command":"insertOrderedList"}),I=e("<a />",{"class":"richText-btn fa fa-list","data-command":"insertUnorderedList"}),M=e("<a />",{"class":"richText-btn fa fa-header"}),P=e("<a />",{"class":"richText-btn fa fa-font"}),W=e("<a />",{"class":"richText-btn fa fa-paint-brush"}),X=e("<a />",{"class":"richText-btn fa fa-image"}),Y=e("<a />",{"class":"richText-btn fa fa-video-camera"}),Q=e("<a />",{"class":"richText-btn fa fa-file-text-o"}),z=e("<a />",{"class":"richText-btn fa fa-link"}),_=e("<a />",{"class":"richText-btn fa fa-table"}),V=e("<a />",{"class":"richText-btn fa fa-recycle","data-command":"removeFormat"}),G=e("<a />",{"class":"richText-btn fa fa-code","data-command":"toggleCode"}),O=e("<div />",{"class":"richText-dropdown-outer"}),j=e("<span />",{"class":"richText-dropdown-close",html:'<span class="fa fa-times"></span>'}),q=e("<ul />",{"class":"richText-dropdown"}),K=e("<div />",{"class":"richText-dropdown"}),Z=e("<div />",{"class":"richText-form"}),$=e("<div />",{"class":"richText-form-item"}),J=e("<label />"),ee=e("<input />",{type:"text"}),te=(e("<input />",{type:"file"}),e("<select />")),ae=e("<button />",{text:"Einf√ºgen","class":"btn"}),ne="richText-"+Math.random().toString(36).substring(7),ie=null,oe=[],re=0,le=q.clone();le.append(e("<li />",{html:'<a data-command="formatBlock" data-option="h1">Title #1</a>'})),le.append(e("<li />",{html:'<a data-command="formatBlock" data-option="h2">Title #2</a>'})),le.append(e("<li />",{html:'<a data-command="formatBlock" data-option="h3">Title #3</a>'})),le.append(e("<li />",{html:'<a data-command="formatBlock" data-option="h4">Title #4</a>'})),M.append(O.clone().append(le.prepend(j.clone())));for(var de=C.fontList,se=q.clone(),ce=0;ce<de.length;ce++)se.append(e("<li />",{html:'<a style="font-family:'+de[ce]+';" data-command="fontName" data-option="'+de[ce]+'">'+de[ce]+"</a>"}));P.append(O.clone().append(se.prepend(j.clone())));var pe=q.clone();pe.html(x("forecolor")),W.append(O.clone().append(pe.prepend(j.clone())));var he=K.clone(),fe=Z.clone().attr("id","richText-URL").attr("data-editor",ne);fe.append($.clone().append(J.clone().text("URL").attr("for","url")).append(ee.clone().attr("id","url"))),fe.append($.clone().append(J.clone().text("Text").attr("for","urlText")).append(ee.clone().attr("id","urlText"))),fe.append($.clone().append(J.clone().text("Open in").attr("for","openIn")).append(te.clone().attr("id","openIn").append(e("<option />",{value:"_self",text:"Same tab"})).append(e("<option />",{value:"_blank",text:"New tab"})))),fe.append($.clone().append(ae.clone())),he.append(fe),z.append(O.clone().append(he.prepend(j.clone())));var ue=K.clone(),me=Z.clone().attr("id","richText-Video").attr("data-editor",ne);me.append($.clone().append(J.clone().text("URL").attr("for","videoURL")).append(ee.clone().attr("id","videoURL"))),me.append($.clone().append(J.clone().text("Size").attr("for","size")).append(te.clone().attr("id","size").append(e("<option />",{value:"responsive",text:"Responsive"})).append(e("<option />",{value:"640x360",text:"640x360"})).append(e("<option />",{value:"560x315",text:"560x315"})).append(e("<option />",{value:"480x270",text:"480x270"})).append(e("<option />",{value:"320x180",text:"320x180"})))),me.append($.clone().append(ae.clone())),ue.append(me),Y.append(O.clone().append(ue.prepend(j.clone())));var ge=K.clone(),ve=Z.clone().attr("id","richText-Image").attr("data-editor",ne);C.imageHTML&&(e(C.imageHTML).find("#imageURL").length>0||"imageURL"===e(C.imageHTML).attr("id"))?ve.html(C.imageHTML):(ve.append($.clone().append(J.clone().text("Image URL").attr("for","imageURL")).append(ee.clone().attr("id","imageURL"))),ve.append($.clone().append(J.clone().text("Align").attr("for","align")).append(te.clone().attr("id","align").append(e("<option />",{value:"left",text:"Left"})).append(e("<option />",{value:"center",text:"Center"})).append(e("<option />",{value:"right",text:"Right"}))))),ve.append($.clone().append(ae.clone())),ge.append(ve),X.append(O.clone().append(ge.prepend(j.clone())));var xe=K.clone(),be=Z.clone().attr("id","richText-File").attr("data-editor",ne);C.fileHTML&&(e(C.fileHTML).find("#fileURL").length>0||"fileURL"===e(C.fileHTML).attr("id"))?be.html(C.fileHTML):(be.append($.clone().append(J.clone().text("File URL").attr("for","fileURL")).append(ee.clone().attr("id","fileURL"))),be.append($.clone().append(J.clone().text("Link text").attr("for","fileText")).append(ee.clone().attr("id","fileText")))),be.append($.clone().append(ae.clone())),xe.append(be),Q.append(O.clone().append(xe.prepend(j.clone())));var Te=K.clone(),we=Z.clone().attr("id","richText-Table").attr("data-editor",ne);return we.append($.clone().append(J.clone().text("Rows").attr("for","tableRows")).append(ee.clone().attr("id","tableRows").attr("type","number"))),we.append($.clone().append(J.clone().text("Columns").attr("for","tableColumns")).append(ee.clone().attr("id","tableColumns").attr("type","number"))),we.append($.clone().append(ae.clone())),Te.append(we),_.append(O.clone().append(Te.prepend(j.clone()))),a(),R.find(".richText-help").on("click",function(){var t=e(this).parents(".richText");if(t){var a=e("<div />",{"class":"richText-help-popup",style:"position:absolute;top:0;right:0;bottom:0;left:0;background-color: rgba(0,0,0,0.3);"}),n=e("<div />",{style:"position:relative;margin:60px auto;padding:20px;background-color:#FAFAFA;width:70%;font-family:Calibri,Verdana,Helvetica,sans-serif;font-size:small;"}),i=e("<div />",{html:'<span id="closeHelp" style="display:block;position:absolute;top:0;right:0;padding:10px;cursor:pointer;" class="fa fa-times" title="Close"></span>'});i.append("<h3>RichText</h3>"),i.append('<hr>Powered by <a href="https://github.com/webfashionist/RichText" target="_blank">webfashionist/RichText</a> (Github) <br>License: <a href="https://github.com/webfashionist/RichText/blob/master/LICENSE" target="_blank">AGPL-3.0</a>'),a.append(n.append(i)),t.append(a),a.on("click","#closeHelp",function(){e(this).parents(".richText-help-popup").remove()})}}),e(document).on("click",".richText-undo, .richText-redo",function(t){var a=e(this);a.hasClass("richText-undo")&&!a.hasClass("is-disabled")?f():a.hasClass("richText-redo")&&!a.hasClass("is-disabled")&&u()}),e(document).on("input change blur keydown",".richText-editor",function(t){return 9!==t.keyCode&&"9"!==t.keyCode||"keydown"!==t.type?(y(),i(),void c(e(this).attr("id"))):(t.preventDefault(),d(window,t),!1)}),e(document).on("input change blur",".richText-initial",function(){C.useSingleQuotes===!0&&e(this).val(v(e(this).val()));var t=e(this).siblings(".richText-editor").attr("id");o(t),c(t)}),e(document).on("dblclick mouseup",".richText-editor",function(){var t=e(this).attr("id");c(t)}),e(document).on("click","#richText-Video button.btn",function(t){t.preventDefault();var a=e(this),n=a.parent(".richText-form-item").parent(".richText-form");if(n.attr("data-editor")===ne){var o=n.find("input#videoURL").val(),r=n.find("select#size").val();if(o){var d="";d=T(o,r),d?(C.useSingleQuotes===!0,l(),g(d),i(),n.find("input#videoURL").val(""),e(".richText-toolbar li.is-selected").removeClass("is-selected")):(n.prepend(e("<div />",{style:"color:red;display:none;","class":"form-item is-error",text:"Video URL not supported"})),n.children(".form-item.is-error").slideDown(),setTimeout(function(){n.children(".form-item.is-error").slideUp(function(){e(this).remove()})},5e3))}else n.prepend(e("<div />",{style:"color:red;display:none;","class":"form-item is-error",text:"Please enter an URL"})),n.children(".form-item.is-error").slideDown(),setTimeout(function(){n.children(".form-item.is-error").slideUp(function(){e(this).remove()})},5e3)}}),e(document).on("mousedown",function(t){var a=e(t.target);if("IMG"===a.prop("tagName")&&a.parents("#"+ne)){startX=t.pageX,startY=t.pageY,startW=a.innerWidth(),startH=a.innerHeight();var n=(a.offset().left,a.offset().left+a.innerWidth()),i=a.offset().top+a.innerHeight(),o=(a.offset().top,!1);a.css({cursor:"default"}),startY<=i&&startY>=i-20&&startX>=n-20&&startX<=n&&(ie=a,ie.css({cursor:"nwse-resize"}),o=!0),o!==!0&&!ie||ie.data("width")?o===!0||ie?t.preventDefault():ie=null:(ie.data("width",a.parents("#"+ne).innerWidth()),ie.data("height",3*a.parents("#"+ne).innerHeight()),t.preventDefault())}}),e(document).mouseup(function(){ie&&ie.css({cursor:"default"}),ie=null}).mousemove(function(e){if(null!==ie){var t=ie.data("width"),a=ie.width(),n=ie.data("height"),o=ie.height();startW+e.pageX-startX<=t&&startH+e.pageY-startY<=n?(ie.innerWidth(startW+e.pageX-startX),i()):startW+e.pageX-startX<=a&&startH+e.pageY-startY<=o&&(ie.innerWidth(startW+e.pageX-startX),i())}}),e(document).on("click","#richText-URL button.btn",function(t){t.preventDefault();var a=e(this),n=a.parent(".richText-form-item").parent(".richText-form");if(n.attr("data-editor")===ne){var i=n.find("input#url").val(),o=n.find("input#urlText").val(),r=n.find("#openIn").val();if(r||(r="_self"),o||(o=i),i){var d="";d=C.useSingleQuotes===!0?"<a href='"+i+"' target='"+r+"'>"+o+"</a>":'<a href="'+i+'" target="'+r+'">'+o+"</a>",l(),g(d),n.find("input#url").val(""),n.find("input#urlText").val(""),e(".richText-toolbar li.is-selected").removeClass("is-selected")}else n.prepend(e("<div />",{style:"color:red;display:none;","class":"form-item is-error",text:"Please enter an URL"})),n.children(".form-item.is-error").slideDown(),setTimeout(function(){n.children(".form-item.is-error").slideUp(function(){e(this).remove()})},5e3)}}),e(document).on("click","#richText-Image button.btn",function(t){t.preventDefault();var a=e(this),n=a.parent(".richText-form-item").parent(".richText-form");if(n.attr("data-editor")===ne){var i=n.find("#imageURL").val(),o=n.find("select#align").val();if(o||(o="center"),i){var r="";r=C.useSingleQuotes===!0?"center"===o?"<div style='text-align:center;'><img src='"+i+"'></div>":"<img src='"+i+"' align='"+o+"'>":"center"===o?'<div style="text-align:center;"><img src="'+i+'"></div>':'<img src="'+i+'" align="'+o+'">',l(),g(r),n.find("input#imageURL").val(""),e(".richText-toolbar li.is-selected").removeClass("is-selected")}else n.prepend(e("<div />",{style:"color:red;display:none;","class":"form-item is-error",text:"Please select an image."})),n.children(".form-item.is-error").slideDown(),setTimeout(function(){n.children(".form-item.is-error").slideUp(function(){e(this).remove()})},5e3)}}),e(document).on("click","#richText-File button.btn",function(t){t.preventDefault();var a=e(this),n=a.parent(".richText-form-item").parent(".richText-form");if(n.attr("data-editor")===ne){var i=n.find("#fileURL").val(),o=n.find("#fileText").val();if(o||(o=i),i){var r="";r=C.useSingleQuotes===!0?"<a href='"+i+"' target='_blank'>"+o+"</a>":'<a href="'+i+'" target="_blank">'+o+"</a>",l(),g(r),n.find("input#fileURL").val(""),n.find("input#fileText").val(""),e(".richText-toolbar li.is-selected").removeClass("is-selected")}else n.prepend(e("<div />",{style:"color:red;display:none;","class":"form-item is-error",text:"Please select a file."})),n.children(".form-item.is-error").slideDown(),setTimeout(function(){n.children(".form-item.is-error").slideUp(function(){e(this).remove()})},5e3)}}),e(document).on("click","#richText-Table button.btn",function(t){t.preventDefault();var a=e(this),n=a.parent(".richText-form-item").parent(".richText-form");if(n.attr("data-editor")===ne){var i=n.find("input#tableRows").val(),o=n.find("input#tableColumns").val();(!i||0>=i)&&(i=2),(!o||0>=o)&&(o=2);var r="";r=C.useSingleQuotes===!0?"<table class='table-1'><tbody>":'<table class="table-1"><tbody>';for(var d=1;i>=d;d++){r+="<tr>";for(var s=1;o>=s;s++)r+="<td> </td>";r+="</tr>"}r+="</tbod></table>",l(),g(r),n.find("input#tableColumns").val(""),n.find("input#tableRows").val(""),e(".richText-toolbar li.is-selected").removeClass("is-selected")}}),e(document).on("click",function(t){var a=e(t.target);if(0===a.parents(".richText-toolbar").length);else if(a.hasClass("richText-dropdown-outer"))a.parent("a").parent("li").removeClass("is-selected");else if(a.find(".richText").length>0)e(".richText-toolbar li").removeClass("is-selected");else if(a.parent().hasClass("richText-dropdown-close"))e(".richText-toolbar li").removeClass("is-selected");else if(a.hasClass("richText-btn")&&e(t.target).children(".richText-dropdown-outer").length>0)if(a.parent("li").addClass("is-selected"),a.hasClass("fa-link")){l();var n=s();a.find("input#urlText").val(""),a.find("input#url").val(""),n&&a.find("input#urlText").val(n)}else a.hasClass("fa-image")}),e(document).on("click",".richText-toolbar a[data-command]",function(t){var a=e(this),i=a.closest(".richText-toolbar");if(i.siblings("#"+ne).length>0&&(!a.parent("li").attr("data-disable")||"false"===a.parent("li").attr("data-disable"))){t.preventDefault();var o=e(this).data("command");if("toggleCode"===o)b();else{var r=null;e(this).data("option")&&(r=e(this).data("option"),r.match(/^h[1-6]$/)&&(o="heading")),n(o,r),"removeFormat"===o&&n("formatBlock","div")}}a.parents("li.is-selected").removeClass("is-selected")}),e(this)}}(jQuery);